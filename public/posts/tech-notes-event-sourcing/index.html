<!DOCTYPE html>
<html lang="en-au">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Tech Notes:  Event Sourcing | The Wandering Glitch</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Title: UPDATE your VIEW on DELETE: The benefits of Event Sourcing Speaker: Sebastian von Conrad of Envato Where: Melbourne CTO School Date: 2016-12-06
We attended a very entertaining and engaging lecture held at the Envato offices on Even Sourcing, entitled &ldquo;UPDATE your VIEW on DELETE&rdquo; given by Sebastian von Conrad (@vonconrad). This was a meetup organised by the Melbourne CTO School group with a couple of dozen attendees present.
This isn&rsquo;t the first time that Sebastian has given the talk - the same talk was given to the Software Engineering Institute at CMU, and the video for that is available online.">
    <meta name="generator" content="Hugo 0.92.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Tech Notes:  Event Sourcing" />
<meta property="og:description" content="Title: UPDATE your VIEW on DELETE: The benefits of Event Sourcing Speaker: Sebastian von Conrad of Envato Where: Melbourne CTO School Date: 2016-12-06
We attended a very entertaining and engaging lecture held at the Envato offices on Even Sourcing, entitled &ldquo;UPDATE your VIEW on DELETE&rdquo; given by Sebastian von Conrad (@vonconrad). This was a meetup organised by the Melbourne CTO School group with a couple of dozen attendees present.
This isn&rsquo;t the first time that Sebastian has given the talk - the same talk was given to the Software Engineering Institute at CMU, and the video for that is available online." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://45.89.107.9/posts/tech-notes-event-sourcing/" /><meta property="article:section" content="posts" />



<meta itemprop="name" content="Tech Notes:  Event Sourcing">
<meta itemprop="description" content="Title: UPDATE your VIEW on DELETE: The benefits of Event Sourcing Speaker: Sebastian von Conrad of Envato Where: Melbourne CTO School Date: 2016-12-06
We attended a very entertaining and engaging lecture held at the Envato offices on Even Sourcing, entitled &ldquo;UPDATE your VIEW on DELETE&rdquo; given by Sebastian von Conrad (@vonconrad). This was a meetup organised by the Melbourne CTO School group with a couple of dozen attendees present.
This isn&rsquo;t the first time that Sebastian has given the talk - the same talk was given to the Software Engineering Institute at CMU, and the video for that is available online.">

<meta itemprop="wordCount" content="711">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tech Notes:  Event Sourcing"/>
<meta name="twitter:description" content="Title: UPDATE your VIEW on DELETE: The benefits of Event Sourcing Speaker: Sebastian von Conrad of Envato Where: Melbourne CTO School Date: 2016-12-06
We attended a very entertaining and engaging lecture held at the Envato offices on Even Sourcing, entitled &ldquo;UPDATE your VIEW on DELETE&rdquo; given by Sebastian von Conrad (@vonconrad). This was a meetup organised by the Melbourne CTO School group with a couple of dozen attendees present.
This isn&rsquo;t the first time that Sebastian has given the talk - the same talk was given to the Software Engineering Institute at CMU, and the video for that is available online."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        The Wandering Glitch
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Posts page">
              Posts
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
    
    <a href="https://techhub.social/@aabs" target="_blank" rel="me noopener" class="mastodon ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Mastodon link" aria-label="follow on Mastodon——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 230 230;" version="1.1" viewBox="0 0 230 230"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<path d="M211.80683 139.0875c-3.1825 16.36625-28.4925 34.2775-57.5625 37.74875-15.16 1.80875-30.0825 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125 0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.3925 27.9425 21.115.7225 39.91625-5.20625 39.91625-5.20625l.86875 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23183 213.82 1.40558 165.31125.20808 116.09125c-.36375-14.61375-.14-28.39375-.14-39.91875 0-50.33 32.97625-65.0825 32.97625-65.0825C49.67058 3.45375 78.20308.2425 107.86433 0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09 0 0 32.97625 14.7525 32.97625 65.0825 0 0 .4125 37.13375-4.6 62.915" style="fill-rule:evenodd;clip-rule:evenodd;"/>
<path d="M65.68743 96.45938c0 9.01375-7.3075 16.32125-16.3225 16.32125-9.01375 0-16.32-7.3075-16.32-16.32125 0-9.01375 7.30625-16.3225 16.32-16.3225 9.015 0 16.3225 7.30875 16.3225 16.3225M124.52893 96.45938c0 9.01375-7.30875 16.32125-16.3225 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.3225 7.30875 16.3225 16.3225M183.36933 96.45938c0 9.01375-7.3075 16.32125-16.32125 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.32125 7.30875 16.32125 16.3225" fill="#fff"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Tech Notes:  Event Sourcing</h1>
      
      <p class="tracked">
        By <strong>aabs</strong>
      </p>
      
      
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links #000000 pr4-l w-two-thirds-l"><p><strong>Title</strong>: UPDATE your VIEW on DELETE: The benefits of Event Sourcing
<strong>Speaker</strong>: Sebastian von Conrad of <a href="https://twitter.com/envato">Envato</a>
<strong>Where</strong>: Melbourne CTO School
<strong>Date</strong>: 2016-12-06</p>
<p>We attended a very entertaining and engaging lecture held at the Envato offices on Even Sourcing, entitled &ldquo;<em>UPDATE your VIEW on DELETE&rdquo; given by Sebastian von Conrad (</em><a href="https://twitter.com/vonconrad">@vonconrad</a>). This was a meetup organised by the <a href="https://www.google.com.au/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwir6aGTn_LQAhWCgrwKHRWUCqkQFggbMAA&amp;url=https%3A%2F%2Fwww.meetup.com%2FCTO-School-Melbourne%2F&amp;usg=AFQjCNEj-GqCxcoJL-yftSRslPKLAGb6TA&amp;sig2=eGPSccRAaWs-O0t_fWO3rw">Melbourne CTO School</a> group with a couple of dozen attendees present.</p>
<p>This isn&rsquo;t the first time that Sebastian has given the talk - the same talk was given to the Software Engineering Institute at CMU, and the video for that is available <a href="https://youtu.be/_TeMYF_JjNg">online</a>.</p>
<h3 id="in-a-nutshell">In a Nutshell</h3>
<ul>
<li>A <strong>store of events</strong> is the primary source of truth.</li>
<li>Events are <strong>immutable</strong>.</li>
<li>Events are stored in an append only <strong>Event Store</strong>.</li>
<li>How you <strong>interpret events</strong> is not immutable.</li>
<li>Interpretation happens through the action of <strong>Projections</strong>.</li>
<li>Projections could be anything, but are often relational databases representing the current state.</li>
<li>Projected databases are often <strong>Denormalized</strong> since performance is their primary purpose.</li>
<li>Projections can be fine grained and special purpose - e.g. One per view</li>
<li>Many different projections of the same data may co-exist.</li>
<li><strong>Queries</strong> happen against a projection of the events- <strong>Clients</strong> communicate with systems using <strong>Commands</strong>.</li>
<li><strong>Events</strong> are created if a command is accepted</li>
<li>Whether a command is acceptable/possible or not depends on current state, so clients often also incorporate a projection of some sort.</li>
<li><strong>CQRS</strong> is the segregation of command APIs and query APIs into different components or services.</li>
<li>Any data stored in a projection is by definition <strong>disposable</strong> and ephemeral, since the projection is recreated by <strong>replaying</strong> the event stream as needed.</li>
<li>To speed up the process of resynchronisation, if necessary, <strong>checkpoint</strong> messages can be generated summarising the state <em>under a given projection</em> up to a given point in time.</li>
</ul>
<h3 id="gotchas">Gotchas</h3>
<ul>
<li>Busy environments can rack up a very large number of events very quickly.</li>
<li>Event Sourcing may be better suited to <strong>read heavy</strong> applications where the projections can stay in sync with the event stream for longer before they become out of sync.</li>
<li>The multiple moving parts of the architecture, all being <strong>highly decoupled</strong>, means that the architecture is inherently <strong>eventually consistent</strong>. How far out of sync a projection falls is a deciding factor on how the system propagates events to projections, and how soon.</li>
<li>Storing the summarised results of projections in the event stream itself is a kind of data pollution, since events are of the business process realm, whereas projections are of the interpretation domain (one is facts, the other hypotheses or conclusions which is by its very nature provisional)</li>
<li>Occasionally event representational flaws are discovered long after the system has been in execution. Correction this requires something like a projectional transformation into a new event store. Something to be avoided as much as a major schema change in a database.</li>
</ul>
<h3 id="observations">Observations</h3>
<ul>
<li>Event Sourcing has historical pedigree in practices like <strong>double entry bookkeeping</strong>. We would never use a bank that treated our money the way we treat data in relational databases.</li>
<li>By segregating the events out in this way, we also segregate the storage of the events from the interpretation of them. This prevents an insidious form of coupling at the conceptual level, often known as the <strong>leaky abstraction</strong>.</li>
<li><strong>Apache Kafka</strong> is an ideal kind of platform for the registering, storage and propagation of events.</li>
<li>Envato built their platform on top of the <strong>pub/sub</strong> capabilities of <strong>Postgresql</strong>.</li>
<li>Dedicated event stores exist to make such architectures easier.</li>
<li>Envato typically start a new project with a phase of <strong>event storming</strong>. A cross between brain storming and User Story authoring geared towards understanding the key transactions of the system.</li>
</ul>
<h3 id="thoughts-and-ideas">Thoughts and Ideas</h3>
<ul>
<li>A business event is defined as a <strong>_fact_</strong>, at a specific point in time.</li>
<li>Storing and interpreting facts (in the sense of <strong>knowledge management</strong>) is at the very heart of the <strong>semantic web</strong> vision.</li>
<li>It makes sense to use data formats like <strong>RDF</strong> or <strong>OWL</strong> to represent events.</li>
<li>They can be directly incorporated into a <strong>triple store</strong> as a kind of projection, or used as raw material for <strong>inferences.</strong></li>
<li>An <strong>inference engine</strong> can be a kind of projection, and the inferences it deduces from the incoming events can be stored in a projection, becoming a <strong>materialised inference</strong>, which is typically disposable and ephemeral too.</li>
</ul>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://45.89.107.9/" >
    &copy;  The Wandering Glitch 2022 
  </a>
    <div>
<div class="ananke-socials">
  
    
    <a href="https://techhub.social/@aabs" target="_blank" rel="me noopener" class="mastodon ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Mastodon link" aria-label="follow on Mastodon——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 230 230;" version="1.1" viewBox="0 0 230 230"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<path d="M211.80683 139.0875c-3.1825 16.36625-28.4925 34.2775-57.5625 37.74875-15.16 1.80875-30.0825 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125 0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.3925 27.9425 21.115.7225 39.91625-5.20625 39.91625-5.20625l.86875 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23183 213.82 1.40558 165.31125.20808 116.09125c-.36375-14.61375-.14-28.39375-.14-39.91875 0-50.33 32.97625-65.0825 32.97625-65.0825C49.67058 3.45375 78.20308.2425 107.86433 0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09 0 0 32.97625 14.7525 32.97625 65.0825 0 0 .4125 37.13375-4.6 62.915" style="fill-rule:evenodd;clip-rule:evenodd;"/>
<path d="M65.68743 96.45938c0 9.01375-7.3075 16.32125-16.3225 16.32125-9.01375 0-16.32-7.3075-16.32-16.32125 0-9.01375 7.30625-16.3225 16.32-16.3225 9.015 0 16.3225 7.30875 16.3225 16.3225M124.52893 96.45938c0 9.01375-7.30875 16.32125-16.3225 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.3225 7.30875 16.3225 16.3225M183.36933 96.45938c0 9.01375-7.3075 16.32125-16.32125 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.32125 7.30875 16.32125 16.3225" fill="#fff"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
